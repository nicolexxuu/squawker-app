{"ast":null,"code":"import { apiCall } from \"../../services/api\";\nimport { addError } from \"./errors\";\nimport { LOAD_MESSAGES, REMOVE_MESSAGE } from \"../actionTypes\";\nexport const loadMessages = messages => ({\n  type: LOAD_MESSAGES,\n  messages\n});\nexport const fetchMessages = () => {\n  return dispatch => {\n    return apiCall(\"get\", \"/api/messages\").then(res => dispatch(loadMessages(res)).catch(err => addError(err.message)));\n  };\n};\nexport const postNewMessage = text => (dispatch, getState) => {\n  let {\n    currentUser\n  } = getState();\n  const id = currentUser.user.id;\n  return apiCall(\"post\", `/api/users/${id}/messages`, {\n    text\n  }).then();\n};","map":{"version":3,"names":["apiCall","addError","LOAD_MESSAGES","REMOVE_MESSAGE","loadMessages","messages","type","fetchMessages","dispatch","then","res","catch","err","message","postNewMessage","text","getState","currentUser","id","user"],"sources":["C:/code/web-dev/warbler/warbler-client/src/store/actions/messages.js"],"sourcesContent":["import { apiCall } from \"../../services/api\";\r\nimport { addError } from \"./errors\";\r\nimport { LOAD_MESSAGES, REMOVE_MESSAGE } from \"../actionTypes\";\r\n\r\nexport const loadMessages = messages => ({\r\n    type: LOAD_MESSAGES,\r\n    messages\r\n})\r\n\r\nexport const fetchMessages = () => {\r\n    return dispatch => {\r\n        return apiCall(\"get\", \"/api/messages\")\r\n            .then((res) =>\r\n                dispatch(loadMessages(res)).\r\n                    catch(err => addError(err.message))\r\n            );\r\n    }\r\n}\r\n\r\nexport const postNewMessage = text => (dispatch, getState) => {\r\n    let {currentUser} = getState();\r\n    const id = currentUser.user.id;\r\n    return apiCall(\"post\", `/api/users/${id}/messages`, {text}).then()\r\n}"],"mappings":"AAAA,SAASA,OAAO,QAAQ,oBAAoB;AAC5C,SAASC,QAAQ,QAAQ,UAAU;AACnC,SAASC,aAAa,EAAEC,cAAc,QAAQ,gBAAgB;AAE9D,OAAO,MAAMC,YAAY,GAAGC,QAAQ,KAAK;EACrCC,IAAI,EAAEJ,aAAa;EACnBG;AACJ,CAAC,CAAC;AAEF,OAAO,MAAME,aAAa,GAAGA,CAAA,KAAM;EAC/B,OAAOC,QAAQ,IAAI;IACf,OAAOR,OAAO,CAAC,KAAK,EAAE,eAAe,CAAC,CACjCS,IAAI,CAAEC,GAAG,IACNF,QAAQ,CAACJ,YAAY,CAACM,GAAG,CAAC,CAAC,CACvBC,KAAK,CAACC,GAAG,IAAIX,QAAQ,CAACW,GAAG,CAACC,OAAO,CAAC,CAAC,CAC1C;EACT,CAAC;AACL,CAAC;AAED,OAAO,MAAMC,cAAc,GAAGC,IAAI,IAAI,CAACP,QAAQ,EAAEQ,QAAQ,KAAK;EAC1D,IAAI;IAACC;EAAW,CAAC,GAAGD,QAAQ,EAAE;EAC9B,MAAME,EAAE,GAAGD,WAAW,CAACE,IAAI,CAACD,EAAE;EAC9B,OAAOlB,OAAO,CAAC,MAAM,EAAG,cAAakB,EAAG,WAAU,EAAE;IAACH;EAAI,CAAC,CAAC,CAACN,IAAI,EAAE;AACtE,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}