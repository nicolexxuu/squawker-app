{"ast":null,"code":"import{apiCall}from\"../../services/api\";import{addError}from\"./errors\";import{LOAD_MESSAGES,REMOVE_MESSAGE}from\"../actionTypes\";export var loadMessages=function loadMessages(messages){return{type:LOAD_MESSAGES,messages:messages};};export var remove=function remove(id){return{type:REMOVE_MESSAGE,id:id};};export var removeMessage=function removeMessage(user_id,message_id){return function(dispatch){return apiCall(\"delete\",\"/api/users/\".concat(user_id,\"/messages/\").concat(message_id)).then(function(){return dispatch(remove(message_id));}).catch(function(err){return dispatch(addError(err.message));});};};export var fetchMessages=function fetchMessages(){return function(dispatch){return apiCall(\"get\",\"/api/messages\").then(function(res){dispatch(loadMessages(res));}).catch(function(err){dispatch(addError(err.message));});};};export var postNewMessage=function postNewMessage(text,url){return function(dispatch,getState){var _getState=getState(),currentUser=_getState.currentUser;var id=currentUser.user.id;return apiCall(\"post\",\"/api/users/\".concat(id,\"/messages\"),{text:text,url:url}).then(function(res){}).catch(function(err){return dispatch(addError(err.message));});};};","map":{"version":3,"names":["apiCall","addError","LOAD_MESSAGES","REMOVE_MESSAGE","loadMessages","messages","type","remove","id","removeMessage","user_id","message_id","dispatch","concat","then","catch","err","message","fetchMessages","res","postNewMessage","text","url","getState","_getState","currentUser","user"],"sources":["C:/code/web-dev/warbler/warbler-client/src/store/actions/messages.js"],"sourcesContent":["import { apiCall } from \"../../services/api\";\r\nimport { addError } from \"./errors\";\r\nimport { LOAD_MESSAGES, REMOVE_MESSAGE } from \"../actionTypes\";\r\n\r\nexport const loadMessages = messages => ({\r\n    type: LOAD_MESSAGES,\r\n    messages\r\n});\r\n\r\nexport const remove = id => ({\r\n    type: REMOVE_MESSAGE,\r\n    id\r\n});\r\n\r\nexport const removeMessage = (user_id, message_id) => {\r\n    return dispatch => {\r\n        return apiCall(\"delete\", `/api/users/${user_id}/messages/${message_id}`)\r\n            .then(() => dispatch(remove(message_id)))\r\n            .catch(err => dispatch(addError(err.message)));\r\n    }\r\n}\r\n\r\nexport const fetchMessages = () => {\r\n    return dispatch => {\r\n        return apiCall(\"get\", \"/api/messages\")\r\n            .then(res => {\r\n                dispatch(loadMessages(res));\r\n            })\r\n            .catch(err => {\r\n                dispatch(addError(err.message))\r\n            });\r\n    };\r\n};\r\n\r\n\r\nexport const postNewMessage = (text, url) => (dispatch, getState) => {\r\n    let { currentUser } = getState();\r\n    const id = currentUser.user.id;\r\n\r\n    return apiCall(\"post\", `/api/users/${id}/messages`, { text, url })\r\n        .then(res => { })\r\n        .catch(err => dispatch(addError(err.message)))\r\n};"],"mappings":"AAAA,OAASA,OAAO,KAAQ,oBAAoB,CAC5C,OAASC,QAAQ,KAAQ,UAAU,CACnC,OAASC,aAAa,CAAEC,cAAc,KAAQ,gBAAgB,CAE9D,MAAO,IAAM,CAAAC,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAGC,QAAQ,QAAK,CACrCC,IAAI,CAAEJ,aAAa,CACnBG,QAAQ,CAARA,QACJ,CAAC,EAAC,CAEF,MAAO,IAAM,CAAAE,MAAM,CAAG,QAAT,CAAAA,MAAMA,CAAGC,EAAE,QAAK,CACzBF,IAAI,CAAEH,cAAc,CACpBK,EAAE,CAAFA,EACJ,CAAC,EAAC,CAEF,MAAO,IAAM,CAAAC,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAIC,OAAO,CAAEC,UAAU,CAAK,CAClD,MAAO,UAAAC,QAAQ,CAAI,CACf,MAAO,CAAAZ,OAAO,CAAC,QAAQ,eAAAa,MAAA,CAAgBH,OAAO,eAAAG,MAAA,CAAaF,UAAU,EAAG,CACnEG,IAAI,CAAC,iBAAM,CAAAF,QAAQ,CAACL,MAAM,CAACI,UAAU,CAAC,CAAC,GAAC,CACxCI,KAAK,CAAC,SAAAC,GAAG,QAAI,CAAAJ,QAAQ,CAACX,QAAQ,CAACe,GAAG,CAACC,OAAO,CAAC,CAAC,GAAC,CACtD,CAAC,CACL,CAAC,CAED,MAAO,IAAM,CAAAC,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAA,CAAS,CAC/B,MAAO,UAAAN,QAAQ,CAAI,CACf,MAAO,CAAAZ,OAAO,CAAC,KAAK,CAAE,eAAe,CAAC,CACjCc,IAAI,CAAC,SAAAK,GAAG,CAAI,CACTP,QAAQ,CAACR,YAAY,CAACe,GAAG,CAAC,CAAC,CAC/B,CAAC,CAAC,CACDJ,KAAK,CAAC,SAAAC,GAAG,CAAI,CACVJ,QAAQ,CAACX,QAAQ,CAACe,GAAG,CAACC,OAAO,CAAC,CAAC,CACnC,CAAC,CAAC,CACV,CAAC,CACL,CAAC,CAGD,MAAO,IAAM,CAAAG,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAIC,IAAI,CAAEC,GAAG,QAAK,UAACV,QAAQ,CAAEW,QAAQ,CAAK,CACjE,IAAAC,SAAA,CAAsBD,QAAQ,EAAE,CAA1BE,WAAW,CAAAD,SAAA,CAAXC,WAAW,CACjB,GAAM,CAAAjB,EAAE,CAAGiB,WAAW,CAACC,IAAI,CAAClB,EAAE,CAE9B,MAAO,CAAAR,OAAO,CAAC,MAAM,eAAAa,MAAA,CAAgBL,EAAE,cAAa,CAAEa,IAAI,CAAJA,IAAI,CAAEC,GAAG,CAAHA,GAAI,CAAC,CAAC,CAC7DR,IAAI,CAAC,SAAAK,GAAG,CAAI,CAAE,CAAC,CAAC,CAChBJ,KAAK,CAAC,SAAAC,GAAG,QAAI,CAAAJ,QAAQ,CAACX,QAAQ,CAACe,GAAG,CAACC,OAAO,CAAC,CAAC,GAAC,CACtD,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}